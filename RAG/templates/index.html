<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>RAG File Upload</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .container {
            max-width: 600px;
            margin: auto;
        }

        .error {
            color: red;
        }

        .success {
            color: green;
        }

        .section {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
        }

        input[type="text"] {
            width: 100%;
            padding: 5px;
        }

        input[type="submit"] {
            padding: 5px 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>RAG File Upload and Query</h1>

        <!-- Flash messages -->
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <p class="{% if 'Error' in message %}error{% else %}success{% endif %}">{{ message }}</p>
        {% endfor %}
        {% endif %}
        {% endwith %}

        <!-- Upload Section -->
        <div class="section">
            <h2>Upload Files</h2>
            <form method="post" enctype="multipart/form-data">
                <label for="csv_file">Upload CSV:</label><br>
                <input type="file" name="csv_file" accept=".csv"><br><br>

                <label for="pdf_file">Upload PDF:</label><br>
                <input type="file" name="pdf_file" accept=".pdf"><br><br>

                <button type="submit" value="Upload Files"></button>
            </form>
        </div>

        <!-- Query Section -->
        <div class="section">
            <h2>Enter Your Query</h2>
            <form method="post">
                <label for="query">Query:</label><br>
                <input type="text" name="query" id="query" placeholder="e.g., Whatâ€™s the sales trend?"
                    value="{{ request.form.get('query', '') }}"><br><br>
                <input type="submit" value="Submit Query">
            </form>
        </div>

        <!-- Response Section -->
        {% if response %}
        <div class="section">
            <h2>Response</h2>
            <p>{{ response }}</p>
        </div>
        {% endif %}
    </div>
</body>

</html>